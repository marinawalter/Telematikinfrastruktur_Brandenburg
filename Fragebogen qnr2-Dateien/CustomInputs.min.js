/*
 2013-2016 Dominik Leiner, SoSci Survey GmbH, www.soscisurvey.de
 @param {String} imageURL Image tilemap to use for buttons
 @param {int} size Input size to use
 @param {HTMLElement} container (optional) Container to apply the inputs to
*/
function SoSciCustomInputs(k,g,b){function n(a,c){var d,e=this,b=!1,h=!1;this.initialized=!1;this.offsetX=0;this.callRefresh=function(){e.refresh()};this.callFocus=function(){b=!0;e.refresh()};this.callBlur=function(){b=!1;e.refresh()};this.callMouseIn=function(){h=!0;e.refresh()};this.callMouseOut=function(){h=!1;e.refresh()};this.init=function(){if(null!==a&&!this.initialized){var c=a.getAttribute("id");if(c){d=document.createElement("label");d.setAttribute("for",c);d.className="inputCST";d.style.width=
g+"px";d.style.height=g+"px";d.style.backgroundImage="url("+k+")";d.style.backgroundPosition=-this.offsetX+"px 0";a.style.display&&(d.style.display=a.style.display);d.style.position=a.style.position;d.style.top=a.style.top;d.style.left=a.style.left;d.style.right=a.style.right;d.style.verticalAlign=a.style.verticalAlign;d.title=a.title;if("-0.5em"===a.style.marginLeft)d.style.marginLeft=-Math.round(g/2)+"px";else if(a.style.left){var b=parseInt(a.style.left),f=parseInt(a.style.width);isNaN(f)&&(f=
13);d.style.left=b+Math.round((f-g)/2)+"px"}Object.defineProperty(d,"checked",{set:function(b){a.checked=b;e.repaint()},get:function(){return a.checked}});b=a.parentNode;(f=a.nextSibling)?b.insertBefore(d,f):b.appendChild(d);a.className="nopacity";a.style.position="absolute";a.addEventListener?(a.addEventListener("change",this.callRefresh,!1),a.addEventListener("click",this.callRefresh,!1),a.addEventListener("focus",this.callFocus,!1),a.addEventListener("blur",this.callBlur,!1),d.addEventListener("mouseover",
this.callMouseIn,!1),d.addEventListener("mouseout",this.callMouseOut,!1)):a.attachEvent?(a.attachEvent("onchange",this.callRefresh),a.attachEvent("onclick",this.callRefresh),a.attachEvent("onfocus",this.callFocus),a.attachEvent("onblus",this.callBlur),d.attachEvent("onmouseover",this.callMouseIn),d.attachEvent("onmouseout",this.callMouseOut)):(a.onchange=this.callRefresh,a.onclick=this.callRefresh,a.onfocus=this.callFocus,a.onblur=this.callBlur,d.onmouseover=this.callMouseIn,d.onmouseout=this.callMouseOut);
b=document.getElementsByTagName("label");for(f=0;f<b.length;f++)b[f].getAttribute("for")===c&&(b[f].addEventListener?(b[f].addEventListener("mouseover",this.callMouseIn,!1),b[f].addEventListener("mouseout",this.callMouseOut,!1)):b[f].attachEvent?(b[f].attachEvent("onmouseover",this.callMouseIn),b[f].attachEvent("onmouseout",this.callMouseOut)):(b[f].onmouseover=this.callMouseIn,b[f].onmouseout=this.callMouseOut));this.initialized=!0;this.repaint()}}};this.refresh=function(){if(null!==c)for(var a=
l[c],b=0;b<a.length;b++)a[b].repaint()};this.repaint=function(){this.initialized&&(d.style.backgroundPosition=a.checked?a.disabled?-this.offsetX+"px -224px":h?-this.offsetX+"px -160px":b?-this.offsetX+"px -96px":-this.offsetX+"px -32px":a.disabled?-this.offsetX+"px -192px":h?-this.offsetX+"px -128px":b?-this.offsetX+"px -64px":-this.offsetX+"px 0")};this.getChecked=function(){return a.checked}}function p(a){this.constructor(a,null);this.offsetX=32;this.repaint();this.refresh=function(){this.repaint()}}
this.tilesetLoaded=!1;p.prototype=new n(null,null);var q=!1;b||(b=document.getElementById("questionnaireForm"),q=!0);if(!b)throw"No form set or found to apply CustomInputs to";var h=[],l={},e=new Image;this.onTilesetLoad=function(){if(!this.tilesetLoaded){this.tilesetLoaded=!0;for(var a=0;a<h.length;a++)h[a].init()}};SoSciTools.attachEvent(e,"load",this.onTilesetLoad);e.src=k;this.applyToNode=function(a){a=a.getElementsByTagName("input");for(var b=0;b<a.length;b++){var d=a[b],c=d.getAttribute("type");
if("radio"===c||"checkbox"===c)if(!q||!SoSciTools.classAround(d,"preventCustomInputs")){if("radio"===c){var e=h.length,g=d.getAttribute("name");h[e]=new n(d,g);l[g]||(l[g]=[]);l[g].push(h[e])}"checkbox"===c&&(e=h.length,h[e]=new p(d));this.tilesetLoaded&&h[e].init()}}};this.applyToNode(b);window.setInterval(function(){for(c=0;c<h.length;c++)h[c].repaint()},500);if(16!==g){e=g-16;for(var m=b.getElementsByTagName("col"),c=0;c<m.length;c++)if(-1!==m[c].className.search(/(^| )inputCSR($| )/)){var r=parseInt(m[c].getAttribute("width"));
isNaN(r)||m[c].setAttribute("width",r+e)}}e=b.getElementsByTagName("div");for(c=0;c<e.length;c++)-1!==e[c].className.search(/(^| )inputCSH($| )/)&&(e[c].style.height=g+"px",e[c].style.padding="2px 0");b=b.getElementsByTagName("img");for(c=0;c<b.length;c++)-1!==b[c].className.search(/(^| )inputCSC($| )/)&&(e=document.createElement("div"),e.style.width=g+"px",e.style.height=g+"px",e.style.display="inline-block",e.style.backgroundImage="url("+k+")",e.style.backgroundPosition="-64px 0",e.style.verticalAlign=
b[c].style.verticalAlign,e.className=b[c].className,b[c].parentNode.insertBefore(e,b[c]),b[c].style.display="none")}SoSciCustomInputs.applyTo=function(k,g,b){new SoSciCustomInputs(g,b,k)};